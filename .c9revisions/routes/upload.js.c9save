{"ts":1358339072429,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1358339332296,"patch":[[{"diffs":[[1,"/*\n * Upload file\n */\n \nfunction upload_file(req, res) {\n  req.setBodyEncoding('binary');\n\n  var stream = new multipart.Stream(req);\n  stream.addListener('part', function(part) {\n    part.addListener('body', function(chunk) {\n      var progress = (stream.bytesReceived / stream.bytesTotal * 100).toFixed(2);\n      var mb = (stream.bytesTotal / 1024 / 1024).toFixed(1);\n\n      sys.print(\"Uploading \"+mb+\"mb (\"+progress+\"%)\\015\");\n\n      // chunk could be appended to a file if the uploaded file needs to be saved\n    });\n  });\n  stream.addListener('complete', function() {\n    res.sendHeader(200, {'Content-Type': 'text/plain'});\n    res.sendBody('Thanks for playing!');\n    res.finish();\n    sys.puts(\"\\n=> Done\");\n  });\n}\n\nexports.upload = upload_file;"]],"start1":0,"start2":0,"length1":0,"length2":753}]],"length":753,"saved":false}
{"ts":1358339727407,"patch":[[{"diffs":[[0,");\n\n"],[-1,"      sys.print(\"Uploading \"+mb+\"mb (\"+progress+\"%)\\015\");\n\n"],[0,"    "]],"start1":366,"start2":366,"length1":68,"length2":8},{"diffs":[[0,"res."],[-1,"sendBody('Thanks for playing!');\n    res.finish();\n    sys.puts(\"\\n=> Done\""],[1,"finish("],[0,");\n "]],"start1":573,"start2":573,"length1":83,"length2":15}]],"length":625,"saved":false}
{"ts":1358340065554,"patch":[[{"diffs":[[0,"/\n \n"],[-1,"function upload_file(req, res) {"],[1,"exports.upload = function(req, res) {\n  console.log('Upload started');"],[0,"\n  r"]],"start1":20,"start2":20,"length1":40,"length2":78},{"diffs":[[0,");\n}"],[-1,"\n\nexports.upload = upload_file"],[0,";"]],"start1":628,"start2":628,"length1":35,"length2":5}]],"length":633,"saved":false}
{"ts":1358341033967,"patch":[[{"diffs":[[0,"');\n"],[-1,"  req.setBodyEncoding('binary');\n\n  var stream = new multipart.Stream(req);\n  stream.addListener('part', function(part) {\n    part.addListener('body', function(chunk) {\n      var progress = (stream.bytesReceived / stream.bytesTotal * 100).toFixed(2);\n      var mb = (stream.bytesTotal / 1024 / 1024).toFixed(1);\n\n      // chunk could be appended to a file if the uploaded file needs to be saved\n    });\n  });\n  stream.addListener('complete', function() {\n    res.sendHeader(200, {'Content-Type': 'text/plain'});\n    res.finish();\n  });\n"],[0,"};"]],"start1":91,"start2":91,"length1":542,"length2":6}]],"length":97,"saved":false}
{"ts":1358341058887,"patch":[[{"diffs":[[0,"s.upload"],[1,"_mockup"],[0," = funct"]],"start1":30,"start2":30,"length1":16,"length2":23}]],"length":104,"saved":false}
{"ts":1358341386077,"patch":[[{"diffs":[[0,"rted');\n"],[1,"  \n  res.writeHead(200, { 'Content-Type': 'text/html' }); \n  res.end();\n"],[0,"};"]],"start1":94,"start2":94,"length1":10,"length2":82}]],"length":176,"saved":false}
